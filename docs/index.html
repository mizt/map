<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
		<title>map</title>
		<style>
			
			* {
				margin:0; 
				padding:0;
				font-family:"Hiragino Kaku Gothic Pro","ヒラギノ角ゴ Pro W3","メイリオ",Meiryo,"ＭＳ Ｐゴシック",sans-serif;
				letter-spacing:1.5px;
			}
			
			::selection { background:rgba(128,128,128,0.25); }
			::-moz-selection { background:rgba(128,128,128,0.25); }
			pre::selection { background:rgba(255,255,255,0.25); }
			pre::-moz-selection { background:rgba(255,255,255,0.25); }					
			img::selection, iframe::selection { background:rgba(0,0,0,0); }
			img::-moz-selection, iframe::-moz-selection { background:rgba(0,0,0,0); }


			body {
				overflow-x:hidden;
				color:#242424;
				font-weight:normal;
				font-size:14px;
				margin-top:0px;
				line-height:1em; 
				padding:18px 0 48px 0;
				background:#FFF;
			}

			.container {
				position:relative;
				width:88%;
				max-width:1280px;
				margin:0 auto 0 auto;
			}
			
			.br:before {
				content:"\A";
				white-space:pre; 
			}
			
			.condensed {
				position:relative;
				width:100%;
				transform-origin:top left;
				transform:scale(0.87,1);
			}
				 
			h1 {
				font-weight:600;
				font-size:24px;
				line-height:48px; 
				margin-left:-1px;
				margin-bottom:14px; 
			}  
			
			h2 { 
				font-weight:600;
				font-size:16px;
				line-height:48px; 
				margin-top:0px;
				margin-bottom:0px;  
				word-wrap: break-word;
				word-break: break-strict;
			}
			
			h3 {
				font-weight:600;
			}
			
			p, h3 {
				font-size:12px;
				line-height:24px; 
			}
			
			div.table {
				width:100%;
				display:table;
			}
			
			div.table-cell {
				display:table-cell;
				width:50%;
			}
						
			pre {
				font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;
				font-size:13px;
				line-height:20px;
				border-radius:2px;
				padding:12px 16px;
				background-color:#1d1e39;
				color:#FEFEFE;
				tab-size:2;
				white-space: pre;          
				white-space: pre-wrap;     
				white-space: -pre-wrap;    
				white-space: -o-pre-wrap;  
				white-space: -moz-pre-wrap;
				white-space: -hp-pre-wrap;
				word-wrap: break-word; 
				word-break:break-all;
				margin-top:6px; 
				margin-bottom:6px;  
			}
			
			pre.gray {
				background-color:#222;
				color:#AAA;
				text-decoration:line-through;
			}
			
			pre + pre {
				margin-top:-6px; 
				margin-bottom:12px;  
			}
			
			video {
				max-width:100%;
				height:auto;
				margin-top:6px;
				margin-bottom:6px; 
				vertical-align:top;
			}
			
			img {
				vertical-align:top;
				max-width:100%;
				height:auto;
			}
			
			span.red {
				background-color:rgba(255,32,32,0.2);
				padding:1px;
			}
			
			a {
				color:#00F;
				text-decoration:underline;
			}
			
			#lang {
				user-select:none;
				font-size:12px;
				z-index:1000;
			}
			
			#lang span {
				cursor:pointer;
			}
			
			.en, .jp {
				display:none;	
			}
			
			
			
				
		</style>
	</head>
	<body>
		<script>
			
			!function(e,n){"object"==typeof exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e.crel=n()}(this,function(){function e(){var o,a=arguments,p=a[0],m=a[1],x=2,v=a.length,b=e[f];if(p=e[c](p)?p:d.createElement(p),1===v)return p;if((!l(m,t)||e[u](m)||s(m))&&(--x,m=null),v-x===1&&l(a[x],"string")&&void 0!==p[r])p[r]=a[x];else for(;v>x;++x)if(o=a[x],null!=o)if(s(o))for(var g=0;g<o.length;++g)y(p,o[g]);else y(p,o);for(var h in m)if(b[h]){var N=b[h];typeof N===n?N(p,m[h]):p[i](N,m[h])}else p[i](h,m[h]);return p}var n="function",t="object",o="nodeType",r="textContent",i="setAttribute",f="attrMap",u="isNode",c="isElement",d=typeof document===t?document:{},l=function(e,n){return typeof e===n},a=typeof Node===n?function(e){return e instanceof Node}:function(e){return e&&l(e,t)&&o in e&&l(e.ownerDocument,t)},p=function(n){return e[u](n)&&1===n[o]},s=function(e){return e instanceof Array},y=function(n,t){e[u](t)||(t=d.createTextNode(t)),n.appendChild(t)};return e[f]={},e[c]=p,e[u]=a,"undefined"!=typeof Proxy&&(e.proxy=new Proxy(e,{get:function(n,t){return!(t in e)&&(e[t]=e.bind(null,t)),e[t]}})),e});

			var make = function(b) {
				for(var k=0; k<b.length; k++) {
					if(Array.isArray(b[k])) {						
						b[k] = make(b[k]);
					}
				}
				return crel.apply({},b);				
			}
			
			var Query = {
							
				query:undefined,
				q:{"lang":"en"},
				get:function(key) {		
					if(this.query==undefined) {
						this.query = window.location.search.substring(1);
						const list = this.query.split("&");
						for(let i=0;i<list.length;i++) {
							const pair = list[i].split("=");
							this.q[pair[0]] = pair[1];
						}
					}	
					return this.q[key];		
				}
			}
									
			const type = Query.get("lang");
			//console.log(type);
			
			
			
			let data = ["div",{"style":"margin-top:6px;margin-bottom:0px;"}];
		
			const list = [0,1,30];
		
			for(let k=0; k<3; k++) {
				
				let n = "0000"+list[k];				
				
				data.push(["div",{"class":"table"},["div",{"class":"table-cell"},["img",{"style":"width:100%;","src":"./data/"+(n.substr(n.length-5,5))+".png"}]],["div",{"class":"table-cell"},["img",{"style":"width:100%;","src":"./dst/"+(n.substr(n.length-5,5))+".png"}]]]);
				
			}
			
			console.log(data);
			
			
						
			var block =[
				{},
				["div",{"class":"container"},
					/*
					["p",{"id":"lang","style":"position:absolute;top:4px;right:0;"},
						["span",{"href":"./index.html?lang=jp"},"EN"],"/",
						["span",{"href":"./index.html"},"JP"]
					],
					*/
					["h1",{"class":"condensed"},"map"],
					["p",["a",{"href":"https://github.com/mizt/map/"},"This is an experimental project"],".",["br"],["span",{"class":"red"},"No Warranty"],".",["br"]," This Application (including the Data) is provided to you “as is,” and you agree to use it at your own risk."],
					
					["h2",{"class":"condensed"},"Demo"],
					
					["video",{"src":"map.mp4","width":1920,"height":1080,"autoplay":true,"muted":true,"playsinline":true,"webkit-playsinline":true,"loop":true,"controls":true}],
					
					["h2",{"class":"condensed"},"Encode"],
					
					["pre",["code","((int)(0x7FFF+(x<<2)))<<16|((int)(0x7FFF+(y<<2)));"]],
			 
					["h2",{"class":"condensed"},"Decode"],
					
					["pre",["code","float x = ((((int(map.a*255.0))<<8|(int(map.b*255.0)))-32767.0)*0.25)/(resolution.x-1.0);\nfloat y = ((((int(map.g*255.0))<<8|(int(map.r*255.0)))-32767.0)*0.25)/(resolution.y-1.0);"]],
			 		
					["h2",{"class":"condensed"},"Data"],

					data
					

			
				]
			];
			
			if(Array.isArray(block)) {			
				for(var k=0; k<block.length; k++) {
					if(Array.isArray(block[k])) {						
						crel(document.body,make(block[k]));
					}
				}
			}
			
			const lang = document.querySelectorAll("#lang")[0];
			if(lang&&lang.childNodes&&lang.childNodes.length==3) {
				
				const EN = lang.childNodes[0];
				const JP = lang.childNodes[2];
				
				const text = function(type,init) {
										
					const en = document.querySelectorAll(".en");
					const jp = document.querySelectorAll(".jp");
					
					if(type=="en") {
						
						EN.style.color = "#000";
						EN.style.textDecoration = "none";
						
						JP.style.color = "#00F";
						JP.style.textDecoration = "underline";
						
						for(let k=0; k<en.length; k++) en[k].style.display = "block";
						for(let k=0; k<jp.length; k++) jp[k].style.display = "none";
						
						if(init) history.replaceState(null,document.title,"?lang=en");
										
					}
					else {
						
						EN.style.color = "#00F";
						EN.style.textDecoration = "underline";

						JP.style.color = "#000";
						JP.style.textDecoration = "none";
												
						for(let k=0; k<en.length; k++) en[k].style.display = "none";
						for(let k=0; k<jp.length; k++) jp[k].style.display = "block";
						
						if(init) history.replaceState(null,document.title,"?lang=jp");
						
					}
				}
							
				EN.addEventListener("click",function(){text("en",true);});	
				JP.addEventListener("click",function(){text("jp",true);});
			
				text(type,false);
			};			
			
		</script>
	</body>
</html>